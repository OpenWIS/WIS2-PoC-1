<div class="box">

  <mat-toolbar #componentToolbar class="header-small">
    <p>Dataset</p>
    <span class="ui-spacer"></span>
  </mat-toolbar>

  <div style="padding:2em;">

    <form novalidate [formGroup]="metadataForm" class="field-full-width">

      <mat-tab-group>


        <mat-tab label="Dataset Information">
          <!--Dataset Information -->

          <!-- Name: // free text  -->
          <!-- [readonly]="!editMode" -->
          <mat-form-field class="mat-form">
            <input matInput placeholder="Dataset Name" formControlName="datasetName">
          </mat-form-field>

          <div class="error" *ngIf="metadataForm.get('datasetName').touched && metadataForm.get('datasetName').hasError('required')">
            Dataset Name is required
          </div>
          <div class="error" *ngIf="metadataForm.get('datasetName').touched && metadataForm.get('datasetName').hasError('minlength')">
            Minimum of 2 characters
          </div>
          <p> </p>
          <!-- Description:// free text   -->
          <mat-form-field class="mat-form">
            <input matInput placeholder="Description" formControlName="description">
          </mat-form-field>
          <div class="error" *ngIf="metadataForm.get('description').touched && metadataForm.get('description').hasError('required')">
            Description is required
          </div>
          <div class="error" *ngIf="metadataForm.get('description').touched && metadataForm.get('description').hasError('minlength')">
            Minimum of 2 characters
          </div>

          <p>
            <!-- From: //datepicker  -->
            <mat-form-field>
              <!-- <input matInput [matDatepickerFrom]="picker" placeholder="From  date:"> -->
              <input matInput [matDatepicker]="pickerFrom" placeholder="Period From :" formControlName="periodFrom">
              <mat-datepicker-toggle matSuffix [for]="pickerFrom"></mat-datepicker-toggle>
              <mat-datepicker #pickerFrom></mat-datepicker>
            </mat-form-field>

            <!-- To:: //datepicker -->
            <mat-form-field>
              <input matInput [matDatepicker]="pickerTo" placeholder="Period To:" formControlName="periodTo">
              <mat-datepicker-toggle matSuffix [for]="pickerTo"></mat-datepicker-toggle>
              <mat-datepicker #pickerTo></mat-datepicker>
            </mat-form-field>
          </p>
          <!-- TODO ADD time validation <input matInput [min]="minDate" [max]="maxDate" [matDatepicker]="picker" -->

          <!-- License: // free text -->
          <mat-form-field class="mat-form">
            <input matInput placeholder="License" formControlName="license">
          </mat-form-field>
          <div class="error" *ngIf="metadataForm.get('license').touched && metadataForm.get('license').hasError('required')">
            License is required
          </div>
          <div class="error" *ngIf="metadataForm.get('license').touched && metadataForm.get('license').hasError('minlength')">
            Minimum of 2 characters
          </div>

          <!-- Dataset Image: <FIle upload> -->
          <br/>
          <p>
            <label for="input-file-id" class="md-button md-raised md-primary">Dataset Image</label>
          </p>
          <input mat-button id="input-file-id" multiple type="file" class="md-button md-raised md-primary" />


          <!-- Measurement Types:// ADD SECTION -->

          <!-- selection list of Available Reading Types-->
          <div style="width:100%;float:left; display:block;">
            <!-- autocomplete dropdown -->
            <div class="field-div3-width">
              <h4 matSubheader>Available Measurement Types:</h4>
              <mat-form-field floatPlaceholder="never">
                <input matInput placeholder="Mesurment" [matAutocomplete]="auto" [formControl]="stateCtrl">
                <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
                  <mat-option *ngFor="let measurement of filteredStates | async" [value]="measurement.label">
                    <span> {{ measurement.label }}</span>
                  </mat-option>
                </mat-autocomplete>
              </mat-form-field>
            </div>

            <!-- button -->
            <div class="field-div3-width" style="padding:4em 0;">
              <button mat-button (click)="addSelected()">
                <mat-icon>arrow_back</mat-icon>
              </button>
              <button mat-button (click)="addSelected()">
                <mat-icon>arrow_forward</mat-icon>
              </button>
            </div>

            <!-- selection list of selected Reading Types-->

            <!-- chip  -->
            <div class="field-div3-width">
              <h4 matSubheader>Selected Measurement Types:</h4>
              <mat-chip-list #chipList>
                <mat-chip *ngFor="let measurement of measurements" [selectable]="selectable" [removable]="removable" (remove)="remove(measurement)">
                  {{measurement.label}}
                  <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
                </mat-chip>
                <input placeholder="Add measurement..." [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                  [matChipInputAddOnBlur]="addOnBlur" (matChipInputTokenEnd)="add($event)" />
              </mat-chip-list>
            </div>
          </div>
        </mat-tab>

        <mat-tab label="Location Information">
          <!-- Country:// drop down -->
          <mat-form-field>
            <mat-select #countrySelect placeholder="Country" formControlName="countryCB" [value]="country">
              <mat-option *ngFor="let country of countries" [value]="country.value" [class.selected]="section === selectedSection">
                {{country.viewValue}}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <!-- State: // free text -->

          <mat-form-field class="mat-form">
            <input matInput placeholder="State" formControlName="state">
          </mat-form-field>
          <div class="error" *ngIf="metadataForm.get('state').touched && metadataForm.get('state').hasError('required')">
            State is required
          </div>
          <div class="error" *ngIf="metadataForm.get('state').touched && metadataForm.get('state').hasError('minlength')">
            Minimum of 2 characters
          </div>

          <!--  Divisions: // free text  -->

          <mat-form-field class="mat-form">
            <input matInput placeholder="Divisions" formControlName="divisions">
          </mat-form-field>
          <div class="error" *ngIf="metadataForm.get('divisions').touched && metadataForm.get('divisions').hasError('required')">
            Divisions is a required field
          </div>
          <div class="error" *ngIf="metadataForm.get('divisions').touched && metadataForm.get('divisions').hasError('minlength')">
            Minimum of 2 characters
          </div>

          <!-- Area Codes:// free text -->

          <mat-form-field class="mat-form">
            <input matInput placeholder="Area Codes" formControlName="areaCodes">
          </mat-form-field>
          <div class="error" *ngIf="metadataForm.get('areaCodes').touched && metadataForm.get('areaCodes').hasError('required')">
            Area Codes is required field
          </div>
          <div class="error" *ngIf="metadataForm.get('areaCodes').touched && metadataForm.get('areaCodes').hasError('minlength')">
            Minimum of 2 characters
          </div>
          <p>

            <!-- Climate: //drop down -->
            <mat-form-field>
              <mat-select #climateSelect placeholder="Climate" formControlName="climate" [value]="climate">
                <mat-option *ngFor="let climate of climates" [value]="climate.value" [class.selected]="section === selectedSection">
                  {{climate.viewValue}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </p>

          <!-- References: // free text    -->
          <mat-form-field class="mat-form">
            <input matInput placeholder="References" formControlName="references">
          </mat-form-field>
          <div class="error" *ngIf="metadataForm.get('references').touched && metadataForm.get('references').hasError('required')">
            References are required
          </div>
          <div class="error" *ngIf="metadataForm.get('references').touched && metadataForm.get('references').hasError('minlength')">
            Minimum of 2 characters
          </div>

        </mat-tab>


        <mat-tab label="Distribution Information">

          <!--# Distribution Information -->
          <!-- Relative URL: /datasets/aisa-adala -->
          <mat-form-field class="mat-form">
            <input matInput placeholder=" Relative URL" formControlName="relativeUrl">
          </mat-form-field>

          <p>
            <!-- filename preFIX -->
            <mat-form-field class="mat-form">
              <input matInput placeholder="Filename Prefix" formControlName="filenameprefix">
            </mat-form-field>
          </p>

          <!--  Data Format: //drop down -->
          <p>
            <mat-form-field>
              <mat-select #climateSelect placeholder="Data format" formControlName="dataformat">
                <mat-option *ngFor="let dataformat of dataformats" [value]="dataformat.value" [class.selected]="section === selectedSection">
                  {{dataformat.viewValue}}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </p>

          <p>
            <mat-checkbox #rdshDis formControlName="rdshDissEnabled" (change)="rdshAdjust($event.srcElement)">RDSH Dissemination</mat-checkbox>

            <span style="padding:0.5em 1em;display:block;">
              <mat-radio-group #rdshOptions *ngIf="rdshDis.checked">
                <mat-radio-button value="1">Notification Only</mat-radio-button>
                
                <mat-radio-button value="2">Notification + Data</mat-radio-button>
              </mat-radio-group>
            </span>
          </p>
          <p>
            <!-- Download Link -->
            <mat-form-field class="mat-form">
              <input matInput placeholder="Download Link" formControlName="downloadLink">
            </mat-form-field>

            <!-- AWS Queue -->
            <mat-form-field class="mat-form">
              <input matInput placeholder=" AWS Queue" formControlName="awsQueue">
            </mat-form-field>
          </p>
          <!-- Json -ld input -->
          <mat-form-field class="field-full-width">
            <textarea matInput placeholder="Json -ld input" formControlName="jsonLd" matTextareaAutosize matAutosizeMinRows="5" matAutosizeMaxRows="20"
              class="field-full-width"></textarea>
          </mat-form-field>

        </mat-tab>
      </mat-tab-group>

      <!-- submit -->
      <span class="ui-spacer"></span>

      <button mat-button (click)="onSubmit()"> Submit form </button>
      <button mat-button>Clear</button>

    </form>
  </div>
</div>
<!-- 
    TODO
    responsive adjustments: 
add fleX:
    npm install --save @angular/flex-layout


  <div fxLayout="row">
      <div fxFlex>
        test<div>
      <div fxFlex>test1<div>
      <div fxFlex>test3<div>
   </div>
-->